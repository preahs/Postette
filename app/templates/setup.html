{% extends "base.html" %}
<div style="background-color: red; color: white; padding: 10px; text-align: center;">TEST BEFORE CONTENT BLOCK</div>
{% block content %}
<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card no-hover">
        <div class="card-header">
          <h1 class="handwritten mb-0">Welcome to Postette!</h1>
        </div>
        <div class="card-body">
          <p class="text-muted mb-4">This is the first time you're launching Postette. Please create your user account.</p>
          
          <form method="POST" class="form">
            {{ form.hidden_tag() }}
            
            <div class="form-group mb-3">
              {{ form.username.label(class="form-label") }}
              {{ form.username(class="form-control") }}
              {% for error in form.username.errors %}
                <div class="text-danger">{{ error }}</div>
              {% endfor %}
            </div>

            <div class="form-group mb-3">
              {{ form.email.label(class="form-label") }}
              {{ form.email(class="form-control") }}
              {% for error in form.email.errors %}
                <div class="text-danger">{{ error }}</div>
              {% endfor %}
            </div>

            <div class="form-group mb-3">
              {{ form.password.label(class="form-label") }}
              <div class="password-field-container">
                {{ form.password(class="form-control", id="password") }}
                <button type="button" class="password-toggle" id="togglePassword">
                  <i class="bi bi-eye"></i>
                </button>
              </div>
              {% for error in form.password.errors %}
                <div class="text-danger">{{ error }}</div>
              {% endfor %}
            </div>

            <div class="form-group mb-3">
              {{ form.confirm_password.label(class="form-label") }}
              <div class="password-field-container">
                {{ form.confirm_password(class="form-control", id="confirmPassword") }}
                <button type="button" class="password-toggle" id="toggleConfirmPassword">
                  <i class="bi bi-eye"></i>
                </button>
              </div>
              {% for error in form.confirm_password.errors %}
                <div class="text-danger">{{ error }}</div>
              {% endfor %}
            </div>

            <div class="form-group mb-3">
              {{ form.newsletter_title.label(class="form-label") }}
              {{ form.newsletter_title(class="form-control") }}
              {% for error in form.newsletter_title.errors %}
                <div class="text-danger">{{ error }}</div>
              {% endfor %}
            </div>

            <div class="form-group">
              {{ form.submit(class="btn btn-primary w-100") }}
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
<div style="background-color: blue; color: white; padding: 10px; text-align: center;">TEST AFTER CONTENT BLOCK</div>

{% block scripts %}
<script>
function setupPasswordToggle(passwordId, toggleId) {
    document.getElementById(toggleId).addEventListener('click', function() {
        const password = document.getElementById(passwordId);
        const icon = this.querySelector('i');
        
        if (password.type === 'password') {
            password.type = 'text';
            icon.classList.remove('bi-eye');
            icon.classList.add('bi-eye-slash');
        } else {
            password.type = 'password';
            icon.classList.remove('bi-eye-slash');
            icon.classList.add('bi-eye');
        }
    });
}

setupPasswordToggle('password', 'togglePassword');
setupPasswordToggle('confirmPassword', 'toggleConfirmPassword');
</script>
{% endblock %}
